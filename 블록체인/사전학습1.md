# 블록체인의 등장 : 비트코인
- 정부, 거대 기업으로부터 개인의 권리와 자산을 지키기 위한 운동
## P2P(Peer to Peer) 네트워크를 통해 관리되는 분산 데이터베이스의 한 형태로, 블로게인 노드(네트워크에 연결된 여러 컴퓨터)에 디지털 서명된 거래 정보를 보관하는 분산 원장 기술(Distributed Ledger Technology)

# 블록체인의 동작 원리
1. 누군가 트랜잭션(transaction)을 만들어 요청한다.
2. 트랜잭션을 요청 받은 노드는 트랜잭션의 유효성을 검증(validation)한다
3. 유효한 트랜잭션이 블록체인의 P2P 네트워크에 전파된다(broadcast)
4. 블록 생성자는 블록 생성 규칙을 준수하며, 검증된 트랜잭션(1.의 트랜잭션)을 포함하는 새 블록(block)을 생성한다.
5. 생성된 새로운 블록이 P2P 네트워크에 전파된다.
6. 기존 블록에 새로운 블록이 연결되며 트랜잭션이 처리된다.

# 공개키 암호화
- 개인키 = k  공개키 = K
# 개인키
- 1~2^256 사이의 무작위로 선택한 숫자
- 개인키 생성 프로세스는 오프라인 프로세스
- 대부분의 프로그래밍 언어에 있는 rand 함수 같은 암호학적으로 안전하지 않은 난수 생성기 사용 금지
- 임의로 생성한 16진수 개인키
# 공개키
- 타원 곡선에 있는 점
# 해시 함수?
- 해시 함수(Hash function)는 임의의 길이를 갖는 데이터를 고정된 길이의 데이터로 변환시켜주는 함수입니다. 블록체인에서는 해시 함수가 하는 역할은 ‘암호화'로, 해시값 비교를 통해서 위변조 여부를 판별하고, 무결성을 검증하는 데 사용됩니다. 비트코인의 블록체인에 사용된 해시 함수는 SHA-256(Secure Hash Algorithm-256)입니다.
- 공개키를 주소로 변환하기 위해 해시 함수 사용
- 임의 크기의 데이터를 고정된 크기 데이터로 매핑하는 함수
- 해시 함수의 입력을 메시지 또는 입력 데이터, 결과를 해시(hash)라 함
- 결과값을 알고 있을 때 입력데이터를 다시 작성하는 것이 불가능한 단방향 함수
# 개인키를 통해 공개키 공개키를 통해 주소를 만들어냄
## 1~2^256 사이의 난수로 타원 곡선 함수를 찍고, 해시 함수로 주소를 만들어냄
# 트랜잭션
- 외부 소유 계정(EOA)에 의해 서명된 메시지
- 이더리움 네트워크에 전송되고 블록체인에 기록된다
- 블록체인 상태 변경을 유발하거나 컨트랙트를 실행하는 유일한 방법이다
- 이더러움은 독자적으로 상태가 변경되지 않는다
- 컨트랙트는 독자적으로 실행되지 않는다
# 트랜잭션의 구조
1. 논스 - 발신 주소에 의해 발행된 일련 번호
2. 가스 가격 - 발신자가 지급하는 가스의 가격
3. 가스 한도 - 트랜잭션을 위해 지불 허용할 가스의 최대량
4. 수신자 - 목적지 이더리움 주소
5. 값 - 목적지에 보낼 이더의 양
6. 데이터 - 가변 길이의 바이너리 데이터 페이로드
7. 디지털 서명 v,r,s 트랜잭션 무결성 및 부인 방지를 위한 디지털 서명
# 합의
- 컴퓨터 과학에서 합의는 블록체인보다 먼저 나온 개념으로 분산 시스템에서 상태를 동기화하기 위해 사용
- 탈중앙화되었지만, 결정론적으로 운영하기 위해 각자 지켜야하는 규칙
- 누가 생성한 블록이 유효한지 합의하기 위한 프로토콜
- 작업 증명과 지분 증명이 가장 일반적이다.
- 이더리움은 22년 9월 15일 PoW에서 PoS로 전환하는 더 머지(The Merge)업그레이드가 완료되었다
# 작업 증명(PoW)
- 임의의 값을 대입하여 얻은 결과 값이 목표 값 이하의 값을 도출할 때까지 해시를 반복하는 작업
- 해시 함수의 특성에 따라 역산 불가능하여 무작위로 대입하는 작업을 무수히 반복하여야 한다
- 마이닝(mining,채굴)은 새로운 블록을 만들기 위한 작업을 의미하는 것이며, 많은 참가자가 참여할수록 블록체인의 보안이 강화된다
- 마이닝을 통해 새로 발행된 화폐의 보상은 블록체인 시스템 보안에 기여하는 노드에 대한 인센티브이다
- 이더리움 PoW 알고리즘 Ethash는 주문형 반도체(ASIC)저항성을 갖게 만들어 마이닝 인프라를 독점하고 보안을 훼손할 수 있는 PoW의 중앙화를 피하고자 고안된 이더리움 1.0의 합의 알고리즘이다.
# 지분 증명(PoS)
- 금전적 보증금 예치기반의 알고리즘
- 지분 증명 블록체인은 검증인 집합을 유지한다
- 이더를 보유한 사람은 이더를 컨트랙트에 예치시키는 특별한 컨트랙트를 보냄으로써 검증이 된다
- 검증인은 다음 볼록에 대해 제안하고 투표하는 순서를 따른다
- 검증인이 보유한 블록이 대다수의 검증인에 의해 거부되면 보증금을 잃을 위험이 있다
- 대다수가 블록을 수락하면 누적된 지분에 비례해 보상을 얻는다.
# Smart Contract란?
- 1990년대에 Nick Szabo가 소개한 개념
- 디지털 형식으로 명시된 서약(commitment)들의 집합
- 결코 스마트하지 않은 단순 컴퓨터 프로그램
- 법적 맥락 없음
- 다소 잘못된 용어임에 불구하고 자리잡음
## 블록체인에서의 정의 : 불변의 컴퓨터 프로그램
- 컴퓨터 프로그램
- 불변 한 번 배포되면 변경 불가
- 결정적 실행한 결과가 모두 같음
- EVM 위에서 동작
- 탈중앙화된 World Computer 동일한 상태를 유지
## Smart Contract를 작성하는 언어
- Solidity
- LLL
- Viper
- Assembly
